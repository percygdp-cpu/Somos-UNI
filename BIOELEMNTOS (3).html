<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Bioelementos - SomosUni</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.6);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 20px;
        }
        
        .modal-content {
            background: white;
            padding: 24px;
            border-radius: 16px;
            max-width: 500px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }
        
        .modal-content-large {
            background: white;
            padding: 24px;
            border-radius: 16px;
            max-width: 1000px;
            width: 100%;
            height: 95vh;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }

        /* NUEVO: Estilos para el milestone */
        .milestone-modal {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .trophy-gold {
            filter: drop-shadow(0 0 20px rgba(255, 215, 0, 0.6));
            animation: float 2s ease-in-out infinite;
        }
        
        .trophy-silver {
            filter: drop-shadow(0 0 15px rgba(192, 192, 192, 0.5));
            animation: float 2s ease-in-out infinite;
        }
        
        .trophy-bronze {
            filter: drop-shadow(0 0 15px rgba(205, 127, 50, 0.5));
            animation: float 2s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: #ff0;
            animation: confetti-fall 5s linear forwards;
            z-index: 9998;
        }
        
        @keyframes confetti-fall {
            0% { transform: translateY(-100px) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
        }
        
        /* EFECTOS √âPICOS NUEVOS */
        @keyframes star-fall {
            0% { 
                transform: translateY(0px) rotate(0deg) scale(0.5); 
                opacity: 0; 
            }
            10% { 
                opacity: 1; 
                transform: translateY(10px) rotate(180deg) scale(1.2); 
            }
            90% { 
                opacity: 1; 
            }
            100% { 
                transform: translateY(100vh) rotate(720deg) scale(0.5); 
                opacity: 0; 
            }
        }

        @keyframes sparkle-twinkle {
            0%, 100% { 
                opacity: 0; 
                transform: scale(0.5) rotate(0deg);
            }
            50% { 
                opacity: 1; 
                transform: scale(1.5) rotate(180deg);
            }
        }

        .epic-glow {
            text-shadow: 
                0 0 10px #fff,
                0 0 20px #ff0,
                0 0 30px #ff0,
                0 0 40px #ff0;
            animation: epic-pulse 2s ease-in-out infinite;
        }

        @keyframes epic-pulse {
            0%, 100% { 
                transform: scale(1);
                text-shadow: 
                    0 0 10px #fff,
                    0 0 20px #ff0,
                    0 0 30px #ff0;
            }
            50% { 
                transform: scale(1.1);
                text-shadow: 
                    0 0 20px #fff,
                    0 0 30px #ff0,
                    0 0 40px #ff0,
                    0 0 50px #ff0;
            }
        }

        .confetti-epic {
            position: fixed;
            animation: confetti-fall-epic 5s linear forwards;
            z-index: 9998;
        }

        @keyframes confetti-fall-epic {
            0% { 
                transform: translateY(-100px) rotate(0deg) translateX(0px); 
                opacity: 1; 
            }
            100% { 
                transform: translateY(100vh) rotate(360deg) translateX(calc(var(--random-x) * 1px)); 
                opacity: 0; 
            }
        }
        
        .question-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 24px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            border: 1px solid #e5e7eb;
        }
        
        .alternative-label {
            display: flex;
            align-items: flex-start;
            padding: 12px 16px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-bottom: 8px;
        }
        
        .alternative-label:hover {
            border-color: #3b82f6;
            background-color: #f8fafc;
        }
        
        .alternative-label.correct {
            border-color: #10b981;
            background-color: #ecfdf5;
        }
        
        .alternative-label.incorrect {
            border-color: #ef4444;
            background-color: #fef2f2;
        }
        
        .alternative-label.disabled {
            cursor: not-allowed;
        }
        
        .alternative-label input[type="radio"] {
            margin-right: 12px;
            margin-top: 2px;
        }
        
        #floating-stats-button {
            position: fixed;
            bottom: 24px;
            right: 24px;
            width: 70px;
            height: 70px;
            z-index: 100;
        }
        
        #quiz-header-fixed {
            position: sticky;
            top: 0;
            background: white;
            padding: 20px 0;
            margin-bottom: 24px;
            border-bottom: 2px solid #e5e7eb;
            z-index: 50;
        }
        
        .quiz-content {
            max-width: 800px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        .card {
            background: white;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            border: 1px solid #e5e7eb;
        }
        
        .page-navigation {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin: 20px 0;
        }
        
        .pdf-content-area {
            height: calc(95vh - 180px);
            overflow-y: auto;
            padding: 10px;
            background: #f8fafc;
        }
        
        .bioelemento-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            font-size: 0.9em;
        }
        
        .bioelemento-table th {
            background: #3b82f6;
            color: white;
            padding: 8px 12px;
            text-align: left;
            border: 1px solid #ddd;
        }
        
        .bioelemento-table td {
            padding: 8px 12px;
            border: 1px solid #ddd;
        }
        
        .bioelemento-table tr:nth-child(even) {
            background: #f3f4f6;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <div id="app-container" class="min-h-screen py-8">
        <!-- La aplicaci√≥n se renderiza aqu√≠ -->
    </div>
    
    <div id="modal-root">
        <!-- Los modales se renderizan aqu√≠ -->
    </div>

    <script>
        // --- Configuraci√≥n y Variables Globales ---
        const TEST_NAME = "Bioelementos"; 
        const TOTAL_QUESTIONS = 100;
        const APP_ID = 'somosuni-bioelementos-test';

        let participantName = "";
        let questions = [];
        let currentPage = 'start';
        let isModalOpen = false;
        let isPDFModalOpen = false;
        let isMilestoneModalOpen = false;
        let currentPDFPage = 1;
        const totalPDFPages = 5;

        // --- Utilidades de Interacci√≥n ---
        function playCorrectSound() {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();

                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);

                oscillator.type = 'sine';
                oscillator.frequency.setValueAtTime(880, audioContext.currentTime);
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                
                oscillator.start();
                gainNode.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 0.2);
                oscillator.stop(audioContext.currentTime + 0.2);
            } catch (e) {
                console.log('Audio no disponible');
            }
        }

        function vibrateIncorrect() {
            if (navigator.vibrate) {
                try {
                    navigator.vibrate(100);
                } catch (e) {
                    console.log('Vibraci√≥n no disponible');
                }
            }
        }

        // --- NUEVO: Sistema de Milestones √âPICO ---
        function checkMilestone(qIndex) {
            // Solo verificar cada 10 preguntas (preguntas 10, 20, 30, etc.)
            if ((qIndex + 1) % 10 === 0) {
                const blockStart = Math.floor(qIndex / 10) * 10;
                const blockEnd = blockStart + 9;
                
                // Calcular puntaje del bloque actual
                let correctInBlock = 0;
                let totalInBlock = 0;
                
                for (let i = blockStart; i <= blockEnd && i < questions.length; i++) {
                    if (questions[i].userAnswer !== null) {
                        totalInBlock++;
                        if (questions[i].alternatives[questions[i].userAnswer].isCorrect) {
                            correctInBlock++;
                        }
                    }
                }
                
                // Solo mostrar milestone si se contestaron todas las preguntas del bloque
                if (totalInBlock === 10) {
                    setTimeout(() => {
                        showMilestoneCelebration(correctInBlock, totalInBlock, qIndex + 1);
                    }, 800);
                }
            }
        }

        function createEpicCelebration() {
            const colors = ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff', '#00ffff', '#ffa500', '#ff69b4'];
            
            // üåü CREAR ESTRELLAS
            for (let i = 0; i < 30; i++) {
                setTimeout(() => {
                    const star = document.createElement('div');
                    star.innerHTML = '‚≠ê';
                    star.style.position = 'fixed';
                    star.style.fontSize = (Math.random() * 30 + 20) + 'px';
                    star.style.left = Math.random() * 100 + 'vw';
                    star.style.top = '-50px';
                    star.style.zIndex = '9999';
                    star.style.opacity = '0';
                    star.style.animation = `star-fall ${Math.random() * 3 + 2}s linear forwards`;
                    star.style.textShadow = '0 0 10px gold';
                    
                    document.body.appendChild(star);
                    
                    setTimeout(() => {
                        star.remove();
                    }, 5000);
                }, i * 150);
            }
            
            // üéâ CREAR CONFETI √âPICO
            for (let i = 0; i < 80; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti-epic';
                    confetti.style.left = Math.random() * 100 + 'vw';
                    confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.width = (Math.random() * 15 + 8) + 'px';
                    confetti.style.height = (Math.random() * 15 + 8) + 'px';
                    confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0%';
                    confetti.style.animationDuration = (Math.random() * 3 + 2) + 's';
                    confetti.style.setProperty('--random-x', Math.random() * 200 - 100);
                    document.body.appendChild(confetti);
                    
                    setTimeout(() => {
                        confetti.remove();
                    }, 5000);
                }, i * 50);
            }
            
            // ‚ú® CREAR ESTRELLAS CENTELLEANTES
            for (let i = 0; i < 20; i++) {
                setTimeout(() => {
                    const sparkle = document.createElement('div');
                    sparkle.innerHTML = '‚ú®';
                    sparkle.style.position = 'fixed';
                    sparkle.style.fontSize = (Math.random() * 25 + 15) + 'px';
                    sparkle.style.left = Math.random() * 100 + 'vw';
                    sparkle.style.top = Math.random() * 100 + 'vh';
                    sparkle.style.zIndex = '9999';
                    sparkle.style.animation = `sparkle-twinkle ${Math.random() * 2 + 1}s ease-in-out infinite`;
                    sparkle.style.textShadow = '0 0 15px yellow';
                    
                    document.body.appendChild(sparkle);
                    
                    setTimeout(() => {
                        sparkle.remove();
                    }, 3000);
                }, i * 200);
            }
        }

        function showMilestoneCelebration(correct, total, currentQuestion) {
            const milestoneNumber = currentQuestion / 10;
            const percentage = (correct / total) * 100;
            
            let title = "";
            let message = "";
            let trophyClass = "";
            let trophyEmoji = "";
            
            // üî• NOMBRE EN MAY√öSCULAS Y APOTE√ìSICO
            const nombreApoteosico = participantName.toUpperCase();
            
            if (percentage === 100) {
                title = "ü•á ¬°PERFECTO ABSOLUTO!";
                message = `¬°10/10! <span class="text-3xl font-black bg-gradient-to-r from-yellow-400 to-orange-500 bg-clip-text text-transparent">${nombreApoteosico}</span>, DOMINAS COMPLETAMENTE ESTE BLOQUE. ERES UN CRACK TOTAL DE LOS BIOELEMENTOS.`;
                trophyClass = "trophy-gold epic-glow";
                trophyEmoji = "üèÜ";
                createEpicCelebration(); // üåüüéâ LLUVIA √âPICA
            } else if (percentage >= 90) {
                title = "ü•à ¬°EXCELENCIA SUPREMA!";
                message = `¬°${correct}/10! <span class="text-2xl font-black bg-gradient-to-r from-gray-300 to-gray-100 bg-clip-text text-transparent">${nombreApoteosico}</span>, UN RENDIMIENTO SOBRESALIENTE. CASI PERFECTO.`;
                trophyClass = "trophy-silver";
                trophyEmoji = "ü•à";
                createConfetti(); // üéâ Solo confetti para excelente
            } else if (percentage >= 70) {
                title = "ü•â ¬°GRANDEZA!";
                message = `¬°${correct}/10! <span class="text-xl font-black bg-gradient-to-r from-yellow-700 to-yellow-500 bg-clip-text text-transparent">${nombreApoteosico}</span>, BUEN TRABAJO, VAS POR BUEN CAMINO HACIA LA MAESTR√çA.`;
                trophyClass = "trophy-bronze";
                trophyEmoji = "ü•â";
                createConfetti(); // üéâ Solo confetti para muy bien
            } else {
                title = "üí™ ¬°FUERZA GUERRERO!";
                message = `¬°${correct}/10! <span class="text-lg font-black bg-gradient-to-r from-blue-400 to-purple-500 bg-clip-text text-transparent">${nombreApoteosico}</span>, SIGUE PRACTICANDO, CADA ERROR TE ACERCA A LA EXCELENCIA.`;
                trophyEmoji = "üìö";
            }
            
            const modalRoot = document.getElementById('modal-root');
            isMilestoneModalOpen = true;
            
            modalRoot.innerHTML = `
                <div class="modal-overlay">
                    <div class="modal-content milestone-modal text-center" onclick="event.stopPropagation()">
                        <div class="mb-6">
                            <div class="text-8xl ${trophyClass} mb-4">${trophyEmoji}</div>
                            <h2 class="text-4xl font-black mb-2">${title}</h2>
                            <p class="text-2xl font-bold mb-4">BLOQUE ${milestoneNumber} COMPLETADO</p>
                            <div class="bg-white bg-opacity-20 rounded-xl p-6 inline-block border-4 border-white border-opacity-30">
                                <p class="text-5xl font-black">${correct}/${total}</p>
                                <p class="text-xl font-bold">(${percentage}%)</p>
                            </div>
                        </div>
                        
                        <!-- üî• NOMBRE APOTE√ìSICO CENTRAL -->
                        <div class="my-6 p-6 bg-white bg-opacity-10 rounded-xl border-4 border-yellow-400 border-opacity-50 shadow-2xl">
                            <p class="text-xl font-semibold mb-3 text-yellow-300">¬°FELICIDADES EPICAS!</p>
                            <div class="text-5xl font-black bg-gradient-to-r from-yellow-300 via-red-400 to-pink-500 bg-clip-text text-transparent animate-pulse epic-glow">
                                ${nombreApoteosico}
                            </div>
                            <p class="text-lg mt-3 text-yellow-200">¬°ERES INCRE√çBLE!</p>
                        </div>
                        
                        <p class="text-xl mb-6 leading-relaxed bg-white bg-opacity-10 p-4 rounded-lg">${message}</p>
                        
                        <div class="space-y-3 mb-6">
                            <div class="flex justify-between items-center bg-white bg-opacity-20 p-4 rounded-xl">
                                <span class="text-lg">Preguntas contestadas:</span>
                                <span class="text-xl font-black">${getAnsweredCount()}/${TOTAL_QUESTIONS}</span>
                            </div>
                            <div class="flex justify-between items-center bg-white bg-opacity-20 p-4 rounded-xl">
                                <span class="text-lg">Progreso total:</span>
                                <span class="text-xl font-black">${Math.round((getAnsweredCount() / TOTAL_QUESTIONS) * 100)}%</span>
                            </div>
                        </div>
                        
                        <button onclick="closeMilestone()"
                                class="w-full bg-gradient-to-r from-yellow-400 to-orange-500 text-white font-black text-xl py-5 rounded-xl hover:from-yellow-500 hover:to-orange-600 transition duration-200 transform hover:scale-[1.02] shadow-2xl border-4 border-yellow-300 epic-glow">
                            üöÄ CONTINUAR CON LAS SIGUIENTES 10 PREGUNTAS
                        </button>
                    </div>
                </div>
            `;
        }

        function closeMilestone() {
            isMilestoneModalOpen = false;
            document.getElementById('modal-root').innerHTML = '';
        }

        // üéâ FUNCI√ìN DE CONFETI SOLO (para niveles menores)
        function createConfetti() {
            const colors = ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff', '#00ffff'];
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + 'vw';
                    confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.animationDuration = (Math.random() * 3 + 2) + 's';
                    document.body.appendChild(confetti);
                    
                    setTimeout(() => {
                        confetti.remove();
                    }, 5000);
                }, i * 100);
            }
        }

        // --- BASE DE DATOS COMPLETA CON 100 PREGUNTAS DIFERENTES ---
        function generateQuestions() {
            const questionDatabase = [
                {
                    question: "Los bioelementos se clasifican seg√∫n la proporci√≥n en que se encuentran en los seres vivos. Se√±ale la alternativa incorrecta:",
                    alternatives: [
                        "El carbono, hidr√≥geno, ox√≠geno y nitr√≥geno forman parte de los bioelementos primarios.",
                        "El magnesio, calcio y sodio son ejemplos de bioelementos secundarios.",
                        "El hierro, yodo y cobre son oligoelementos indispensables para el metabolismo.",
                        "Los bioelementos secundarios representan aproximadamente el 96% del total de masa del organismo humano.",
                        "Los oligoelementos se requieren en cantidades m√≠nimas pero cumplen funciones vitales."
                    ],
                    correct: 3,
                    explanation: "Los bioelementos primarios (C, H, O, N, P, S) representan aproximadamente el 96% de la masa del organismo humano, no los secundarios. Los bioelementos secundarios constituyen alrededor del 3.9%."
                },
                {
                    question: "Respecto al f√≥sforo, marque la correcta:",
                    alternatives: [
                        "Forma parte de la hormona tiroidea y participa en la regulaci√≥n del metabolismo basal.",
                        "Es un oligoelemento cuya funci√≥n principal es el transporte de ox√≠geno en la sangre.",
                        "Es esencial en la formaci√≥n de ATP, ADN y ARN, y participa en la estructura de los huesos.",
                        "Su ausencia provoca mixedema y bocio end√©mico.",
                        "Participa en la contracci√≥n muscular como componente principal de la hemoglobina."
                    ],
                    correct: 2,
                    explanation: "El f√≥sforo es fundamental para la formaci√≥n de ATP (mol√©cula energ√©tica), ADN y ARN (material gen√©tico), y forma parte de la hidroxiapatita en los huesos. No est√° relacionado con hormonas tiroideas ni con la hemoglobina."
                },
                {
                    question: "El carbono es fundamental para la vida porque:",
                    alternatives: [
                        "Forma enlaces i√≥nicos muy estables con el ox√≠geno.",
                        "Es el elemento m√°s abundante en la corteza terrestre.",
                        "Puede formar cuatro enlaces covalentes y cadenas carbonadas.",
                        "Es el principal componente de las sales minerales.",
                        "Participa exclusivamente en la respiraci√≥n celular."
                    ],
                    correct: 2,
                    explanation: "El carbono puede formar cuatro enlaces covalentes, permitiendo la formaci√≥n de cadenas carbonadas y estructuras complejas que son la base de las biomol√©culas org√°nicas."
                },
                {
                    question: "¬øCu√°l de los siguientes elementos NO es considerado un bioelemento primario?",
                    alternatives: [
                        "Carbono",
                        "Nitr√≥geno", 
                        "Calcio",
                        "Ox√≠geno",
                        "Hidr√≥geno"
                    ],
                    correct: 2,
                    explanation: "El calcio es un bioelemento secundario. Los bioelementos primarios son C, H, O, N, P, S."
                },
                {
                    question: "La funci√≥n principal del hierro en el organismo humano es:",
                    alternatives: [
                        "Formar parte de la estructura √≥sea.",
                        "Participar en la s√≠ntesis de hormonas tiroideas.",
                        "Transportar ox√≠geno en la hemoglobina y mioglobina.",
                        "Activar enzimas digestivas.",
                        "Regular el equilibrio √°cido-base."
                    ],
                    correct: 2,
                    explanation: "El hierro es esencial para el transporte de ox√≠geno como componente de la hemoglobina en gl√≥bulos rojos y la mioglobina en m√∫sculos."
                },
                {
                    question: "El yodo es indispensable para:",
                    alternatives: [
                        "La formaci√≥n de hemoglobina.",
                        "La s√≠ntesis de hormonas tiroideas.",
                        "La contracci√≥n muscular.",
                        "La coagulaci√≥n sangu√≠nea.",
                        "La activaci√≥n de la vitamina D."
                    ],
                    correct: 1,
                    explanation: "El yodo es componente esencial de las hormonas tiroideas T3 y T4, que regulan el metabolismo basal."
                },
                {
                    question: "El magnesio participa principalmente en:",
                    alternatives: [
                        "El transporte de ox√≠geno.",
                        "La estructura de la clorofila en plantas.",
                        "La s√≠ntesis de hemoglobina.",
                        "La regulaci√≥n del metabolismo del calcio.",
                        "La formaci√≥n de gl√≥bulos rojos."
                    ],
                    correct: 1,
                    explanation: "El magnesio es el √°tomo central de la mol√©cula de clorofila, pigmento esencial para la fotos√≠ntesis en plantas."
                },
                {
                    question: "El sodio y el potasio son esenciales para:",
                    alternatives: [
                        "La formaci√≥n de huesos y dientes.",
                        "El impulso nervioso y equilibrio osm√≥tico.",
                        "La s√≠ntesis de prote√≠nas.",
                        "La respiraci√≥n celular.",
                        "La fotos√≠ntesis."
                    ],
                    correct: 1,
                    explanation: "El sodio y potasio mantienen el potencial de membrana y participan en la bomba Na+/K+ ATPasa, esencial para el impulso nervioso."
                },
                {
                    question: "El calcio cumple las siguientes funciones EXCEPTO:",
                    alternatives: [
                        "Contracci√≥n muscular.",
                        "Coagulaci√≥n sangu√≠nea.",
                        "Estructura √≥sea.",
                        "Transporte de ox√≠geno.",
                        "Se√±alizaci√≥n celular."
                    ],
                    correct: 3,
                    explanation: "El calcio no participa en el transporte de ox√≠geno. Esta funci√≥n corresponde al hierro en la hemoglobina."
                },
                {
                    question: "Los oligoelementos se caracterizan por:",
                    alternatives: [
                        "Constituir m√°s del 1% de la masa corporal.",
                        "Ser necesarios en grandes cantidades.",
                        "Ser indispensables aunque en cantidades m√≠nimas.",
                        "Formar parte solo de estructuras esquel√©ticas.",
                        "Ser sintetizados por el organismo."
                    ],
                    correct: 2,
                    explanation: "Los oligoelementos son elementos traza necesarios en cantidades muy peque√±as pero esenciales para funciones metab√≥licas espec√≠ficas."
                },
                {
                    question: "El zinc es importante para:",
                    alternatives: [
                        "La s√≠ntesis de hemoglobina.",
                        "La funci√≥n del sistema inmune y cicatrizaci√≥n.",
                        "La formaci√≥n de huesos.",
                        "La regulaci√≥n del metabolismo basal.",
                        "El transporte de electrones."
                    ],
                    correct: 1,
                    explanation: "El zinc es cofactor de m√∫ltiples enzimas y es esencial para la funci√≥n inmune, divisi√≥n celular y cicatrizaci√≥n."
                },
                {
                    question: "El cobre participa en:",
                    alternatives: [
                        "La formaci√≥n de vitamina B12.",
                        "La s√≠ntesis de hemoglobina.",
                        "La estructura de la clorofila.",
                        "La regulaci√≥n de la presi√≥n arterial.",
                        "La s√≠ntesis de gluc√≥geno."
                    ],
                    correct: 1,
                    explanation: "El cobre es necesario para la absorci√≥n y metabolismo del hierro, y participa en la s√≠ntesis de hemoglobina."
                },
                {
                    question: "El fl√∫or es importante para:",
                    alternatives: [
                        "La formaci√≥n de gl√≥bulos rojos.",
                        "La prevenci√≥n de caries dentales.",
                        "La s√≠ntesis de prote√≠nas.",
                        "El metabolismo de carbohidratos.",
                        "La contracci√≥n muscular."
                    ],
                    correct: 1,
                    explanation: "El fl√∫or se incorpora al esmalte dental formando fluorapatita, que lo hace m√°s resistente a las caries."
                },
                {
                    question: "El manganeso act√∫a como:",
                    alternatives: [
                        "Componente de la hemoglobina.",
                        "Cofactor enzim√°tico en el metabolismo.",
                        "Regulador del equilibrio h√≠drico.",
                        "Elemento estructural de huesos.",
                        "Transportador de ox√≠geno."
                    ],
                    correct: 1,
                    explanation: "El manganeso es cofactor de enzimas como la super√≥xido dismutasa, importante en la defensa antioxidante."
                },
                {
                    question: "El selenio es conocido por:",
                    alternatives: [
                        "Su papel en la s√≠ntesis de col√°geno.",
                        "Su funci√≥n antioxidante.",
                        "Su participaci√≥n en la coagulaci√≥n.",
                        "Su rol en la contracci√≥n muscular.",
                        "Su importancia en la visi√≥n."
                    ],
                    correct: 1,
                    explanation: "El selenio es componente de la enzima glutati√≥n peroxidasa, que protege contra el da√±o oxidativo."
                },
                {
                    question: "El molibdeno es esencial para:",
                    alternatives: [
                        "La fijaci√≥n de nitr√≥geno.",
                        "La s√≠ntesis de hemoglobina.",
                        "La formaci√≥n de huesos.",
                        "La regulaci√≥n tiroidea.",
                        "La contracci√≥n cardiaca."
                    ],
                    correct: 0,
                    explanation: "El molibdeno es cofactor de enzimas como la nitrogenasa, importante en la fijaci√≥n biol√≥gica de nitr√≥geno."
                },
                {
                    question: "El cobalto forma parte de:",
                    alternatives: [
                        "La hemoglobina.",
                        "La vitamina B12.",
                        "La clorofila.",
                        "Las hormonas tiroideas.",
                        "El ATP."
                    ],
                    correct: 1,
                    explanation: "El cobalto es el √°tomo central de la mol√©cula de vitamina B12 (cobalamina), esencial para la formaci√≥n de gl√≥bulos rojos."
                },
                {
                    question: "El cromo participa en:",
                    alternatives: [
                        "El metabolismo de la glucosa.",
                        "La s√≠ntesis de prote√≠nas.",
                        "La formaci√≥n de huesos.",
                        "El transporte de ox√≠geno.",
                        "La contracci√≥n muscular."
                    ],
                    correct: 0,
                    explanation: "El cromo potencia la acci√≥n de la insulina y est√° involucrado en el metabolismo de carbohidratos."
                },
                {
                    question: "El n√≠quel es importante para:",
                    alternatives: [
                        "La estructura del ADN.",
                        "El metabolismo del hierro.",
                        "La s√≠ntesis de urea.",
                        "La formaci√≥n de membranas.",
                        "La visi√≥n nocturna."
                    ],
                    correct: 2,
                    explanation: "El n√≠quel es cofactor de la enzima ureasa, que cataliza la hidr√≥lisis de la urea."
                },
                {
                    question: "El vanadio puede imitar los efectos de:",
                    alternatives: [
                        "La insulina.",
                        "La hemoglobina.",
                        "La clorofila.",
                        "Las hormonas tiroideas.",
                        "La vitamina D."
                    ],
                    correct: 0,
                    explanation: "El vanadio tiene efectos insulinomim√©ticos, pudiendo mejorar la sensibilidad a la insulina."
                },
                {
                    question: "El silicio es importante para:",
                    alternatives: [
                        "La formaci√≥n de tejido conectivo.",
                        "La s√≠ntesis de hemoglobina.",
                        "El impulso nervioso.",
                        "La respiraci√≥n celular.",
                        "La fotos√≠ntesis."
                    ],
                    correct: 0,
                    explanation: "El silicio participa en la formaci√≥n de col√°geno y tejido conectivo, siendo importante para huesos y articulaciones."
                },
                {
                    question: "El esta√±o parece estar relacionado con:",
                    alternatives: [
                        "El crecimiento √≥seo.",
                        "La s√≠ntesis de prote√≠nas.",
                        "El metabolismo energ√©tico.",
                        "La funci√≥n hep√°tica.",
                        "La visi√≥n."
                    ],
                    correct: 0,
                    explanation: "El esta√±o puede estar involucrado en reacciones redox y parece influir en el crecimiento √≥seo."
                },
                {
                    question: "En plantas, la deficiencia de nitr√≥geno causa:",
                    alternatives: [
                        "Clorosis en hojas j√≥venes.",
                        "Clorosis en hojas viejas.",
                        "Necrosis en bordes de hojas.",
                        "Acumulaci√≥n de antocianinas.",
                        "Crecimiento excesivo."
                    ],
                    correct: 1,
                    explanation: "La deficiencia de nitr√≥geno causa clorosis (amarillamiento) primero en hojas viejas, pues el N es m√≥vil en la planta."
                },
                {
                    question: "La deficiencia de hierro en plantas se manifiesta como:",
                    alternatives: [
                        "Clorosis intervenal en hojas j√≥venes.",
                        "Clorosis generalizada en hojas viejas.",
                        "Necrosis en √°pices.",
                        "Enanismo y hojas peque√±as.",
                        "Acumulaci√≥n de pigmentos rojos."
                    ],
                    correct: 0,
                    explanation: "El hierro es inm√≥vil en plantas, por lo que su deficiencia causa clorosis intervenal primero en hojas j√≥venes."
                },
                {
                    question: "El boro es esencial para las plantas porque:",
                    alternatives: [
                        "Participa en la divisi√≥n celular.",
                        "Forma parte de la clorofila.",
                        "Interviene en el transporte de az√∫cares.",
                        "Es componente de enzimas respiratorias.",
                        "Regula la apertura estom√°tica."
                    ],
                    correct: 2,
                    explanation: "El boro es importante para la formaci√≥n de la pared celular y el transporte de az√∫cares a trav√©s de las membranas."
                },
                {
                    question: "El molibdeno en plantas es crucial para:",
                    alternatives: [
                        "La fijaci√≥n de nitr√≥geno.",
                        "La s√≠ntesis de clorofila.",
                        "La absorci√≥n de f√≥sforo.",
                        "La resistencia a sequ√≠a.",
                        "La floraci√≥n."
                    ],
                    correct: 0,
                    explanation: "El molibdeno es cofactor de la nitrogenasa y nitrato reductasa, enzimas clave en el metabolismo del nitr√≥geno."
                },
                {
                    question: "El cobre en plantas participa en:",
                    alternatives: [
                        "La fotos√≠ntesis y respiraci√≥n.",
                        "La s√≠ntesis de lignina.",
                        "La absorci√≥n de agua.",
                        "La formaci√≥n de flores.",
                        "La producci√≥n de semillas."
                    ],
                    correct: 0,
                    explanation: "El cobre es componente de enzimas como la plastocianina (fotos√≠ntesis) y citocromo oxidasa (respiraci√≥n)."
                },
                {
                    question: "¬øCu√°l de estos elementos NO es un metal?",
                    alternatives: [
                        "Sodio",
                        "Potasio", 
                        "Calcio",
                        "F√≥sforo",
                        "Magnesio"
                    ],
                    correct: 3,
                    explanation: "El f√≥sforo es un no metal. Los dem√°s elementos mencionados son metales alcalinos o alcalinot√©rreos."
                },
                {
                    question: "El elemento m√°s abundante en el cuerpo humano es:",
                    alternatives: [
                        "Carbono",
                        "Hidr√≥geno",
                        "Ox√≠geno", 
                        "Nitr√≥geno",
                        "Calcio"
                    ],
                    correct: 2,
                    explanation: "El ox√≠geno es el elemento m√°s abundante en el cuerpo humano (aproximadamente 65% de la masa), principalmente formando parte del agua."
                },
                {
                    question: "Los bioelementos primarios constituyen aproximadamente:",
                    alternatives: [
                        "50% de la masa corporal.",
                        "75% de la masa corporal.",
                        "96% de la masa corporal.",
                        "99% de la masa corporal.",
                        "85% de la masa corporal."
                    ],
                    correct: 2,
                    explanation: "Los bioelementos primarios (C, H, O, N, P, S) constituyen aproximadamente el 96% de la masa del cuerpo humano."
                },
                {
                    question: "El elemento que forma el esqueleto de las mol√©culas org√°nicas es:",
                    alternatives: [
                        "Ox√≠geno",
                        "Nitr√≥geno",
                        "Carbono",
                        "Hidr√≥geno", 
                        "F√≥sforo"
                    ],
                    correct: 2,
                    explanation: "El carbono tiene la capacidad √∫nica de formar cadenas y anillos estables, siendo la base estructural de todas las mol√©culas org√°nicas."
                },
                {
                    question: "El f√≥sforo es componente esencial de:",
                    alternatives: [
                        "Solo los √°cidos nucleicos.",
                        "Solo el ATP.",
                        "Solo los huesos.",
                        "√Åcidos nucleicos, ATP y huesos.",
                        "Solo las membranas celulares."
                    ],
                    correct: 3,
                    explanation: "El f√≥sforo forma parte de los √°cidos nucleicos (ADN, ARN), mol√©culas energ√©ticas (ATP) y la hidroxiapatita de huesos y dientes."
                },
                {
                    question: "El azufre se encuentra principalmente en:",
                    alternatives: [
                        "Amino√°cidos ciste√≠na y metionina.",
                        "La glucosa y otros az√∫cares.",
                        "Los √°cidos grasos.",
                        "Las bases nitrogenadas.",
                        "La vitamina C."
                    ],
                    correct: 0,
                    explanation: "El azufre forma parte de los amino√°cidos ciste√≠na y metionina, permitiendo la formaci√≥n de puentes disulfuro en prote√≠nas."
                },
                {
                    question: "El potasio se concentra principalmente en:",
                    alternatives: [
                        "El l√≠quido extracelular.",
                        "El l√≠quido intracelular.",
                        "Los huesos.",
                        "La sangre.",
                        "El tejido nervioso."
                    ],
                    correct: 1,
                    explanation: "El potasio es el cati√≥n principal del l√≠quido intracelular, donde regula el potencial de membrana y la presi√≥n osm√≥tica."
                },
                {
                    question: "El cloro es importante para:",
                    alternatives: [
                        "La formaci√≥n de HCl en el est√≥mago.",
                        "La s√≠ntesis de hormonas.",
                        "La estructura √≥sea.",
                        "El transporte de ox√≠geno.",
                        "La contracci√≥n muscular."
                    ],
                    correct: 0,
                    explanation: "El cloro forma parte del √°cido clorh√≠drico (HCl) en el jugo g√°strico, esencial para la digesti√≥n proteica."
                },
                {
                    question: "El magnesio es cofactor de enzimas involucradas en:",
                    alternatives: [
                        "Solo la fotos√≠ntesis.",
                        "Solo la respiraci√≥n.",
                        "La fotos√≠ntesis y replicaci√≥n del ADN.",
                        "La s√≠ntesis de prote√≠nas y metabolismo energ√©tico.",
                        "Solo el metabolismo lip√≠dico."
                    ],
                    correct: 3,
                    explanation: "El magnesio es cofactor de m√°s de 300 enzimas, incluyendo aquellas involucradas en s√≠ntesis de prote√≠nas, metabolismo energ√©tico y replicaci√≥n del ADN."
                },
                {
                    question: "El calcio act√∫a como segundo mensajero en:",
                    alternatives: [
                        "La se√±alizaci√≥n celular.",
                        "La s√≠ntesis de ADN.",
                        "La fotos√≠ntesis.",
                        "La respiraci√≥n anaerobia.",
                        "La digesti√≥n de l√≠pidos."
                    ],
                    correct: 0,
                    explanation: "El calcio funciona como segundo mensajero en m√∫ltiples v√≠as de se√±alizaci√≥n celular, regulando procesos como la contracci√≥n muscular y liberaci√≥n de neurotransmisores."
                },
                {
                    question: "El hierro se almacena en el h√≠gado como:",
                    alternatives: [
                        "Hemoglobina.",
                        "Mioglobina.",
                        "Ferritina.",
                        "Transferrina.",
                        "Hemosiderina."
                    ],
                    correct: 2,
                    correct: 4, // Actualizado para ferritina
                    explanation: "El hierro se almacena principalmente como ferritina y hemosiderina en el h√≠gado, bazo y m√©dula √≥sea."
                },
                {
                    question: "La deficiencia de yodo causa:",
                    alternatives: [
                        "Anemia.",
                        "Bocio.",
                        "Raquitismo.",
                        "Escorbuto.",
                        "Osteoporosis."
                    ],
                    correct: 1,
                    explanation: "La deficiencia de yodo causa bocio (agrandamiento de la tiroides) debido a la sobreestimulaci√≥n para producir hormonas tiroideas."
                },
                {
                    question: "El zinc es componente de:",
                    alternatives: [
                        "La enzima anhidrasa carb√≥nica.",
                        "La hemoglobina.",
                        "La clorofila.",
                        "La insulina.",
                        "La vitamina B12."
                    ],
                    correct: 0,
                    explanation: "El zinc es cofactor de la anhidrasa carb√≥nica, enzima crucial para el transporte de CO2 y equilibrio √°cido-base."
                },
                {
                    question: "El cobre es necesario para la formaci√≥n de:",
                    alternatives: [
                        "El col√°geno.",
                        "La hemoglobina.",
                        "La mielina.",
                        "La queratina.",
                        "La elastina."
                    ],
                    correct: 0,
                    explanation: "El cobre es cofactor de la enzima lisil oxidasa, esencial para la formaci√≥n de enlaces cruzados en el col√°geno y elastina."
                },
                {
                    question: "El manganeso participa en la s√≠ntesis de:",
                    alternatives: [
                        "La urea.",
                        "El colesterol.",
                        "La glucosa.",
                        "Los √°cidos biliares.",
                        "Los neurotransmisores."
                    ],
                    correct: 1,
                    explanation: "El manganeso es cofactor de enzimas como la arginasa (ciclo de la urea) y enzimas del metabolismo de carbohidratos y l√≠pidos."
                },
                {
                    question: "El selenio protege contra:",
                    alternatives: [
                        "Infecciones bacterianas.",
                        "Da√±o por radicales libres.",
                        "Deficiencia de calcio.",
                        "Hipoglucemia.",
                        "Hipotensi√≥n."
                    ],
                    correct: 1,
                    explanation: "El selenio es componente de la glutati√≥n peroxidasa, enzima antioxidante que protege contra el da√±o de radicales libres."
                },
                {
                    question: "El cromo potencia la acci√≥n de:",
                    alternatives: [
                        "La insulina.",
                        "La adrenalina.",
                        "La hemoglobina.",
                        "La clorofila.",
                        "La vitamina D."
                    ],
                    correct: 0,
                    explanation: "El cromo forma parte del factor de tolerancia a la glucosa y potencia la acci√≥n de la insulina en el metabolismo de carbohidratos."
                },
                {
                    question: "El molibdeno es cofactor de:",
                    alternatives: [
                        "La nitrogenasa.",
                        "La anhidrasa carb√≥nica.",
                        "La ATP sintasa.",
                        "La citocromo oxidasa.",
                        "La hexoquinasa."
                    ],
                    correct: 0,
                    explanation: "El molibdeno es cofactor esencial de la nitrogenasa (fijaci√≥n de N2) y xantina oxidasa (metabolismo de purinas)."
                },
                {
                    question: "El cobalto es esencial para:",
                    alternatives: [
                        "La s√≠ntesis de vitamina B12.",
                        "La formaci√≥n de hemoglobina.",
                        "La contracci√≥n muscular.",
                        "La conducci√≥n nerviosa.",
                        "La absorci√≥n de calcio."
                    ],
                    correct: 0,
                    explanation: "El cobalto es el √°tomo central de la vitamina B12 (cobalamina), esencial para la eritropoyesis y funci√≥n nerviosa."
                },
                {
                    question: "El n√≠quel est√° presente en:",
                    alternatives: [
                        "La enzima ureasa.",
                        "La hemoglobina.",
                        "La clorofila.",
                        "La insulina.",
                        "El col√°geno."
                    ],
                    correct: 0,
                    explanation: "El n√≠quel es cofactor de la ureasa en algunas bacterias y plantas, catalizando la hidr√≥lisis de la urea."
                },
                {
                    question: "El vanadio puede tener efectos:",
                    alternatives: [
                        "Insulinomim√©ticos.",
                        "Antibi√≥ticos.",
                        "Anticoagulantes.",
                        "Analg√©sicos.",
                        "Antipir√©ticos."
                    ],
                    correct: 0,
                    explanation: "El vanadio tiene efectos similares a la insulina, mejorando la captaci√≥n de glucosa en c√©lulas."
                },
                {
                    question: "El silicio es importante para:",
                    alternatives: [
                        "La formaci√≥n de tejido conectivo.",
                        "La s√≠ntesis de hemoglobina.",
                        "La conducci√≥n nerviosa.",
                        "La contracci√≥n muscular.",
                        "La visi√≥n."
                    ],
                    correct: 0,
                    explanation: "El silicio participa en la s√≠ntesis de col√°geno y glicosaminoglicanos, importantes para huesos, cart√≠lagos y tejido conectivo."
                },
                {
                    question: "El esta√±o puede influir en:",
                    alternatives: [
                        "El crecimiento √≥seo.",
                        "La s√≠ntesis de prote√≠nas.",
                        "El metabolismo lip√≠dico.",
                        "La funci√≥n hep√°tica.",
                        "La producci√≥n de orina."
                    ],
                    correct: 0,
                    explanation: "El esta√±o parece estar relacionado con reacciones redox y puede influir en el crecimiento y desarrollo √≥seo."
                },
                {
                    question: "En plantas, el boro es esencial para:",
                    alternatives: [
                        "La divisi√≥n celular.",
                        "La formaci√≥n de polen.",
                        "La s√≠ntesis de clorofila.",
                        "La absorci√≥n de agua.",
                        "La respiraci√≥n."
                    ],
                    correct: 1,
                    explanation: "El boro es crucial para la formaci√≥n y germinaci√≥n del polen, y para el desarrollo del tubo pol√≠nico en plantas."
                },
                {
                    question: "La deficiencia de molibdeno en plantas causa:",
                    alternatives: [
                        "Clorosis en hojas j√≥venes.",
                        "Acumulaci√≥n de nitratos.",
                        "Necrosis en bordes.",
                        "Enanismo severo.",
                        "Coloraci√≥n p√∫rpura."
                    ],
                    correct: 1,
                    explanation: "La deficiencia de molibdeno impide la reducci√≥n de nitratos, causando su acumulaci√≥n y s√≠ntomas de deficiencia de nitr√≥geno."
                },
                {
                    question: "El cobre en plantas es importante para:",
                    alternatives: [
                        "La lignificaci√≥n.",
                        "La fotos√≠ntesis.",
                        "La respiraci√≥n.",
                        "Todas las anteriores.",
                        "Ninguna de las anteriores."
                    ],
                    correct: 3,
                    explanation: "El cobre participa en la lignificaci√≥n, fotos√≠ntesis (plastocianina) y respiraci√≥n (citocromo oxidasa) en plantas."
                },
                {
                    question: "El zinc en plantas es esencial para:",
                    alternatives: [
                        "La s√≠ntesis de tript√≥fano.",
                        "La formaci√≥n de auxinas.",
                        "La activaci√≥n enzim√°tica.",
                        "Todas las anteriores.",
                        "Ninguna de las anteriores."
                    ],
                    correct: 3,
                    explanation: "El zinc es cofactor enzim√°tico, participa en la s√≠ntesis de tript√≥fano (precursor de auxinas) y activa m√∫ltiples enzimas."
                },
                {
                    question: "El manganeso en plantas act√∫a en:",
                    alternatives: [
                        "El fotosistema II.",
                        "La divisi√≥n del agua.",
                        "La s√≠ntesis de clorofila.",
                        "Todas las anteriores.",
                        "Ninguna de las anteriores."
                    ],
                    correct: 3,
                    explanation: "El manganeso es esencial para el fotosistema II, participa en la divisi√≥n del agua y s√≠ntesis de clorofila."
                },
                {
                    question: "El hierro en plantas es componente de:",
                    alternatives: [
                        "Citocromos.",
                        "Ferredoxina.",
                        "Catalasa.",
                        "Todas las anteriores.",
                        "Ninguna de las anteriores."
                    ],
                    correct: 3,
                    explanation: "El hierro forma parte de citocromos (cadena respiratoria), ferredoxina (fotos√≠ntesis) y catalasa (protecci√≥n oxidativa)."
                },
                {
                    question: "El cloro en plantas participa en:",
                    alternatives: [
                        "La divisi√≥n del agua.",
                        "El equilibrio i√≥nico.",
                        "La apertura estom√°tica.",
                        "Todas las anteriores.",
                        "Ninguna de las anteriores."
                    ],
                    correct: 3,
                    explanation: "El cloro participa en la divisi√≥n del agua en fotos√≠ntesis, mantiene el equilibrio i√≥nico y regula la apertura estom√°tica."
                },
                {
                    question: "El sodio en algunas plantas es:",
                    alternatives: [
                        "Esencial.",
                        "Ben√©fico.",
                        "T√≥xico.",
                        "Indiferente.",
                        "Inhibidor."
                    ],
                    correct: 1,
                    explanation: "En plantas hal√≥fitas y algunas C4, el sodio es ben√©fico aunque no esencial, mejorando el crecimiento en ciertas condiciones."
                },
                {
                    question: "El cobalto es esencial para:",
                    alternatives: [
                        "Plantas leguminosas.",
                        "Plantas gram√≠neas.",
                        "Plantas C4.",
                        "Plantas CAM.",
                        "Todas las plantas."
                    ],
                    correct: 0,
                    explanation: "El cobalto es esencial para plantas leguminosas porque es necesario para las bacterias fijadoras de nitr√≥geno en sus n√≥dulos."
                },
                {
                    question: "El n√≠quel es esencial para:",
                    alternatives: [
                        "Plantas que metabolizan urea.",
                        "Todas las plantas.",
                        "Solo plantas C3.",
                        "Solo plantas C4.",
                        "Ninguna planta."
                    ],
                    correct: 1,
                    explanation: "El n√≠quel es esencial para todas las plantas como cofactor de la ureasa, importante en el metabolismo del nitr√≥geno."
                },
                {
                    question: "El silicio en plantas proporciona:",
                    alternatives: [
                        "Resistencia mec√°nica.",
                        "Protecci√≥n contra pat√≥genos.",
                        "Tolerancia a sequ√≠a.",
                        "Todas las anteriores.",
                        "Ninguna de las anteriores."
                    ],
                    correct: 3,
                    explanation: "El silicio se deposita en paredes celulares proporcionando resistencia mec√°nica, protecci√≥n contra pat√≥genos y tolerancia a estr√©s abi√≥tico."
                },
                {
                    question: "El elemento m√°s limitante para el crecimiento de plantas es usually:",
                    alternatives: [
                        "Nitr√≥geno.",
                        "F√≥sforo.",
                        "Potasio.",
                        "Calcio.",
                        "Magnesio."
                    ],
                    correct: 0,
                    explanation: "El nitr√≥geno es usualmente el nutriente m√°s limitante para el crecimiento vegetal debido a su alta demanda y movilidad en suelos."
                },
                {
                    question: "En suelos √°cidos, la disponibilidad de ________ disminuye:",
                    alternatives: [
                        "Hierro.",
                        "Manganeso.",
                        "Aluminio.",
                        "F√≥sforo.",
                        "Molibdeno."
                    ],
                    correct: 4,
                    explanation: "En suelos √°cidos, la disponibilidad de molibdeno disminuye porque forma molibdatos insolubles, mientras que la de otros micronutrientes aumenta."
                },
                {
                    question: "La clorosis intervenal es caracter√≠stica de deficiencia de:",
                    alternatives: [
                        "Magnesio.",
                        "Hierro.",
                        "Manganeso.",
                        "Zinc.",
                        "Boro."
                    ],
                    correct: 0,
                    explanation: "La clorosis intervenal (venas verdes, tejido amarillo) es caracter√≠stica de deficiencia de magnesio, que es m√≥vil en la planta."
                },
                {
                    question: "La necrosis en √°pices y bordes de hojas indica deficiencia de:",
                    alternatives: [
                        "Potasio.",
                        "Calcio.",
                        "Boro.",
                        "Cobre.",
                        "Cloro."
                    ],
                    correct: 0,
                    explanation: "La necrosis en √°pices y bordes de hojas es t√≠pica de deficiencia de potasio, que es muy m√≥vil en la planta."
                },
                {
                    question: "El encarrujamiento de hojas j√≥venes indica deficiencia de:",
                    alternatives: [
                        "Calcio.",
                        "Boro.",
                        "Cobre.",
                        "Molibdeno.",
                        "N√≠quel."
                    ],
                    correct: 0,
                    explanation: "El encarrujamiento y deformaci√≥n de hojas j√≥venes indica deficiencia de calcio, que es inm√≥vil en la planta."
                },
                {
                    question: "La acumulaci√≥n de antocianinas (coloraci√≥n p√∫rpura) indica deficiencia de:",
                    alternatives: [
                        "F√≥sforo.",
                        "Nitr√≥geno.",
                        "Potasio.",
                        "Magnesio.",
                        "Azufre."
                    ],
                    correct: 0,
                    explanation: "La acumulaci√≥n de antocianinas causando coloraci√≥n p√∫rpura en hojas y tallos es caracter√≠stica de deficiencia de f√≥sforo."
                },
                {
                    question: "El acortamiento internodal y rosetamiento indican deficiencia de:",
                    alternatives: [
                        "Zinc.",
                        "Boro.",
                        "Cobre.",
                        "Manganeso.",
                        "Molibdeno."
                    ],
                    correct: 0,
                    explanation: "El acortamiento internodal, rosetamiento y hojas peque√±as son s√≠ntomas caracter√≠sticos de deficiencia de zinc."
                },
                {
                    question: "La muerte de meristemos apicales indica deficiencia de:",
                    alternatives: [
                        "Boro.",
                        "Calcio.",
                        "Cobre.",
                        "Ambos A y B.",
                        "Ambos B y C."
                    ],
                    correct: 3,
                    explanation: "La muerte de meristemos apicales puede indicar deficiencia de boro o calcio, ambos inm√≥viles en la planta."
                },
                {
                    question: "La clorosis generalizada en hojas viejas indica deficiencia de:",
                    alternatives: [
                        "Nitr√≥geno.",
                        "Magnesio.",
                        "Potasio.",
                        "F√≥sforo.",
                        "Todas las anteriores."
                    ],
                    correct: 4,
                    explanation: "La clorosis generalizada en hojas viejas indica deficiencia de nutrientes m√≥viles como nitr√≥geno, magnesio, potasio y f√≥sforo."
                },
                {
                    question: "Los s√≠ntomas de deficiencia aparecen primero en hojas j√≥venes para:",
                    alternatives: [
                        "Hierro.",
                        "Calcio.",
                        "Boro.",
                        "Cobre.",
                        "Todas las anteriores."
                    ],
                    correct: 4,
                    explanation: "Los nutrientes inm√≥viles como hierro, calcio, boro y cobre muestran s√≠ntomas primero en hojas j√≥venes y meristemos."
                },
                {
                    question: "La toxicidad por manganeso se manifiesta como:",
                    alternatives: [
                        "Manchas necr√≥ticas.",
                        "Clorosis intervenal.",
                        "Enanismo.",
                        "Acumulaci√≥n de antocianinas.",
                        "Necrosis marginal."
                    ],
                    correct: 0,
                    explanation: "La toxicidad por manganeso causa manchas necr√≥ticas en hojas viejas debido a su acumulaci√≥n en tejidos."
                },
                {
                    question: "La toxicidad por boro causa:",
                    alternatives: [
                        "Necrosis marginal y apical.",
                        "Clorosis generalizada.",
                        "Encarrujamiento.",
                        "Rosetamiento.",
                        "Coloraci√≥n p√∫rpura."
                    ],
                    correct: 0,
                    explanation: "La toxicidad por boro causa necrosis marginal y apical en hojas, comenzando en las m√°s viejas."
                },
                {
                    question: "La salinidad afecta principalmente la absorci√≥n de:",
                    alternatives: [
                        "Agua.",
                        "Nitr√≥geno.",
                        "F√≥sforo.",
                        "Potasio.",
                        "Calcio."
                    ],
                    correct: 0,
                    explanation: "La salinidad reduce el potencial h√≠drico del suelo, dificultando la absorci√≥n de agua por las ra√≠ces."
                },
                {
                    question: "El aluminio en suelos √°cidos es t√≥xico porque:",
                    alternatives: [
                        "Da√±a las ra√≠ces.",
                        "Inhibe la divisi√≥n celular.",
                        "Altera la absorci√≥n de nutrientes.",
                        "Todas las anteriores.",
                        "Ninguna de las anteriores."
                    ],
                    correct: 3,
                    explanation: "El aluminio t√≥xico en suelos √°cidos da√±a ra√≠ces, inhibe la divisi√≥n celular y altera la absorci√≥n de agua y nutrientes."
                },
                {
                    question: "La disponibilidad de hierro aumenta en suelos:",
                    alternatives: [
                        "√Åcidos.",
                        "Alcalinos.",
                        "Salinos.",
                        "Calc√°reos.",
                        "Arenosos."
                    ],
                    correct: 0,
                    explanation: "La disponibilidad de hierro aumenta en suelos √°cidos donde forma compuestos m√°s solubles, mientras que en alcalinos precipita."
                },
                {
                    question: "El encalado de suelos corrige la deficiencia de:",
                    alternatives: [
                        "Calcio.",
                        "Molibdeno.",
                        "Ambos A y B.",
                        "Nitr√≥geno.",
                        "F√≥sforo."
                    ],
                    correct: 2,
                    explanation: "El encalado corrige deficiencia de calcio y aumenta el pH, mejorando la disponibilidad de molibdeno en suelos √°cidos."
                },
                {
                    question: "La fertilizaci√≥n con quelatos se usa para corregir deficiencias de:",
                    alternatives: [
                        "Micronutrientes.",
                        "Macronutrientes.",
                        "Solo hierro.",
                        "Solo zinc.",
                        "Solo manganeso."
                    ],
                    correct: 0,
                    explanation: "Los fertilizantes quelatados se usan para micronutrientes como hierro, zinc, manganeso y cobre, manteni√©ndolos disponibles en el suelo."
                },
                {
                    question: "La ley del m√≠nimo establece que:",
                    alternatives: [
                        "El crecimiento es limitado por el nutriente m√°s deficiente.",
                        "Todos los nutrientes son igualmente importantes.",
                        "El exceso de un nutriente compensa las deficiencias.",
                        "Los micronutrientes no limitan el crecimiento.",
                        "El agua es siempre el factor limitante."
                    ],
                    correct: 0,
                    explanation: "La ley del m√≠nimo de Liebig establece que el crecimiento vegetal es limitado por el nutriente que se encuentra en menor cantidad relativa a las necesidades de la planta."
                },
                {
                    question: "La sinergia entre nutrientes ocurre cuando:",
                    alternatives: [
                        "Un nutriente mejora la absorci√≥n de otro.",
                        "Los nutrientes compiten por su absorci√≥n.",
                        "Un nutriente inhibe la absorci√≥n de otro.",
                        "Los nutrientes son antag√≥nicos.",
                        "Los nutrientes no interact√∫an."
                    ],
                    correct: 0,
                    explanation: "La sinergia ocurre cuando un nutriente facilita la absorci√≥n o utilizaci√≥n de otro, como el potasio que mejora la utilizaci√≥n de nitr√≥geno."
                },
                {
                    question: "El antagonismo entre nutrientes ocurre cuando:",
                    alternatives: [
                        "Un nutriente reduce la absorci√≥n de otro.",
                        "Los nutrientes se complementan.",
                        "Los nutrientes son sin√©rgicos.",
                        "Los nutrientes no interact√∫an.",
                        "Un nutriente es t√≥xico."
                    ],
                    correct: 0,
                    explanation: "El antagonismo ocurre cuando un nutriente reduce la absorci√≥n o utilizaci√≥n de otro, como el exceso de f√≥sforo que reduce la absorci√≥n de zinc."
                },
                {
                    question: "La relaci√≥n ideal N:P:K en fertilizantes para crecimiento vegetativo es aproximadamente:",
                    alternatives: [
                        "3:1:2",
                        "1:1:1", 
                        "2:1:1",
                        "1:2:1",
                        "1:1:2"
                    ],
                    correct: 0,
                    explanation: "Para crecimiento vegetativo, la relaci√≥n ideal suele ser 3:1:2 (N:P:K), con mayor proporci√≥n de nitr√≥geno para promover desarrollo foliar."
                },
                {
                    question: "En la fase reproductiva, las plantas requieren m√°s:",
                    alternatives: [
                        "F√≥sforo y potasio.",
                        "Nitr√≥geno y calcio.",
                        "Magnesio y azufre.",
                        "Hierro y manganeso.",
                        "Boro y cobre."
                    ],
                    correct: 0,
                    explanation: "En la fase reproductiva, las plantas requieren m√°s f√≥sforo (para energ√≠a y divisi√≥n celular) y potasio (para transporte de fotosintatos)."
                },
                {
                    question: "La fertilizaci√≥n foliar es efectiva para corregir deficiencias de:",
                    alternatives: [
                        "Micronutrientes.",
                        "Macronutrientes.",
                        "Solo hierro.",
                        "Solo zinc.",
                        "Todos los nutrientes."
                    ],
                    correct: 0,
                    explanation: "La fertilizaci√≥n foliar es particularmente efectiva para micronutrientes, que se requieren en peque√±as cantidades y pueden ser absorbidos r√°pidamente."
                },
                {
                    question: "El diagn√≥stico foliar se basa en:",
                    alternatives: [
                        "An√°lisis qu√≠mico de tejidos.",
                        "Observaci√≥n de s√≠ntomas visuales.",
                        "Ambos A y B.",
                        "An√°lisis de suelo solamente.",
                        "Observaci√≥n de ra√≠ces."
                    ],
                    correct: 2,
                    explanation: "El diagn√≥stico foliar combina an√°lisis qu√≠mico de tejidos con observaci√≥n de s√≠ntomas visuales para identificar deficiencias nutricionales."
                },
                {
                    question: "Los valores cr√≠ticos en an√°lisis foliar indican:",
                    alternatives: [
                        "Concentraci√≥n por debajo de la cual aparece deficiencia.",
                        "Concentraci√≥n √≥ptima para m√°ximo crecimiento.",
                        "Concentraci√≥n t√≥xica.",
                        "Concentraci√≥n promedio.",
                        "Concentraci√≥n m√°xima tolerable."
                    ],
                    correct: 0,
                    explanation: "El valor cr√≠tico es la concentraci√≥n de nutriente en tejido por debajo de la cual es probable que ocurra deficiencia y reduzca el crecimiento."
                },
                {
                    question: "La movilidad de nutrientes en la planta afecta:",
                    alternatives: [
                        "La localizaci√≥n de s√≠ntomas de deficiencia.",
                        "La frecuencia de fertilizaci√≥n.",
                        "El m√©todo de aplicaci√≥n.",
                        "Todas las anteriores.",
                        "Ninguna de las anteriores."
                    ],
                    correct: 3,
                    explanation: "La movilidad afecta d√≥nde aparecen los s√≠ntomas (hojas viejas vs j√≥venes), la frecuencia de aplicaci√≥n y el m√©todo m√°s efectivo de fertilizaci√≥n."
                }
            ];

            // Mezclar y seleccionar 100 preguntas diferentes
            let todasLasPreguntas = [...questionDatabase];
            
            // Verificar que tenemos suficientes preguntas
            if (todasLasPreguntas.length < TOTAL_QUESTIONS) {
                console.warn(`No hay suficientes preguntas √∫nicas. Se repetir√°n algunas.`);
            }
            
            // Mezclar aleatoriamente
            todasLasPreguntas = todasLasPreguntas
                .sort(() => Math.random() - 0.5);
            
            // Si necesitamos m√°s preguntas, repetiremos algunas pero mezcladas
            while (todasLasPreguntas.length < TOTAL_QUESTIONS) {
                const preguntasExtra = [...questionDatabase]
                    .sort(() => Math.random() - 0.5)
                    .slice(0, TOTAL_QUESTIONS - todasLasPreguntas.length);
                todasLasPreguntas = [...todasLasPreguntas, ...preguntasExtra];
            }
            
            // Tomar exactamente 100 preguntas
            todasLasPreguntas = todasLasPreguntas.slice(0, TOTAL_QUESTIONS);

            return todasLasPreguntas.map((q, index) => ({
                id: index + 1,
                questionText: q.question,
                explanation: q.explanation,
                alternatives: q.alternatives.map((text, i) => ({
                    text: text,
                    isCorrect: i === q.correct
                })),
                userAnswer: null,
                explanationVisible: false
            }));
        }

        // --- Datos COMPLETOS del Repaso en PDF ---
        const pdfContent = [
            {
                title: "P√°gina 1 - Conceptos Fundamentales y Clasificaci√≥n",
                content: `
                    <div class="bg-white p-6 rounded-lg shadow-sm">
                        <h2 class="text-2xl font-bold text-blue-800 mb-4 text-center">BIOELEMENTOS ‚Äì Desarrollo Extremo Nivel UNMSM (San Marcos)</h2>
                        
                        <div class="mb-6">
                            <h3 class="text-xl font-bold text-green-700 mb-3 border-b-2 border-green-200 pb-2">I. Conceptos Fundamentales</h3>
                            <div class="bg-gray-50 p-4 rounded-lg border-l-4 border-blue-500">
                                <p class="font-semibold mb-2 text-blue-800">1. Definici√≥n:</p>
                                <p class="mb-3 pl-4">√Åtomos qu√≠micos esenciales que forman biomol√©culas y participan en procesos vitales de plantas y animales.</p>
                                
                                <p class="font-semibold mb-2 text-blue-800">2. Importancia biol√≥gica y qu√≠mica:</p>
                                <ul class="list-disc list-inside space-y-2 ml-4">
                                    <li class="bg-white p-2 rounded">Construcci√≥n de biomol√©culas (prote√≠nas, carbohidratos, l√≠pidos, √°cidos nucleicos)</li>
                                    <li class="bg-white p-2 rounded">Participaci√≥n en reacciones metab√≥licas: catabolismo y anabolismo</li>
                                    <li class="bg-white p-2 rounded">Mantenimiento de homeostasis: equilibrio h√≠drico, i√≥nico y √°cido-base</li>
                                    <li class="bg-white p-2 rounded">Se√±alizaci√≥n celular y divisi√≥n celular</li>
                                </ul>
                                
                                <p class="font-semibold mt-4 mb-2 text-blue-800">3. Distinci√≥n:</p>
                                <ul class="list-disc list-inside space-y-2 ml-4">
                                    <li class="bg-blue-50 p-2 rounded"><span class="font-bold text-blue-700">Primarios:</span> C, H, O, N</li>
                                    <li class="bg-green-50 p-2 rounded"><span class="font-bold text-green-700">Secundarios:</span> Na, K, Ca, Mg, Cl, P, S</li>
                                    <li class="bg-yellow-50 p-2 rounded"><span class="font-bold text-yellow-700">Oligoelementos:</span> Fe, Zn, Cu, I, Se, Mn, Co, Mo, Cr, Ni, F</li>
                                </ul>
                            </div>
                        </div>

                        <div class="mb-6">
                            <h3 class="text-xl font-bold text-green-700 mb-3 border-b-2 border-green-200 pb-2">II. Clasificaci√≥n y Abundancia seg√∫n San Marcos</h3>
                            <table class="bioelemento-table">
                                <thead>
                                    <tr>
                                        <th class="py-3 px-4">Tipo</th>
                                        <th class="py-3 px-4">Elementos</th>
                                        <th class="py-3 px-4">% del cuerpo</th>
                                        <th class="py-3 px-4">Funci√≥n general</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="font-semibold text-blue-700">Primario</td>
                                        <td>C, H, O, N</td>
                                        <td>~96%</td>
                                        <td>Estructura de biomol√©culas</td>
                                    </tr>
                                    <tr>
                                        <td class="font-semibold text-green-700">Secundario</td>
                                        <td>Na, K, Ca, Mg, Cl, P, S</td>
                                        <td>~4%</td>
                                        <td>Balance osm√≥tico, cofactores, estructura</td>
                                    </tr>
                                    <tr>
                                        <td class="font-semibold text-yellow-700">Oligoelementos</td>
                                        <td>Fe, Zn, Cu, I, Se, Mn, Co, Mo</td>
                                        <td>&lt;0.1%</td>
                                        <td>Cofactores enzim√°ticos, regulaci√≥n</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                `
            },
            {
                title: "P√°gina 2 - Funciones y Aplicaciones I",
                content: `
                    <div class="bg-white p-6 rounded-lg shadow-sm">
                        <h3 class="text-xl font-bold text-green-700 mb-4 border-b-2 border-green-200 pb-2">IV. Funciones y aplicaciones en los seres vivos</h3>
                        
                        <div class="space-y-4">
                            <div class="bg-blue-50 p-4 rounded-lg border-l-4 border-blue-500">
                                <h4 class="font-bold text-blue-800 mb-2 text-lg">1. Carbono (C)</h4>
                                <ul class="list-disc list-inside ml-4 space-y-2">
                                    <li class="bg-white p-2 rounded">Forma cadenas y anillos de biomol√©culas</li>
                                    <li class="bg-white p-2 rounded">Base de carbohidratos, l√≠pidos, prote√≠nas y √°cidos nucleicos</li>
                                    <li class="bg-white p-2 rounded">Participa en fotos√≠ntesis (fijaci√≥n de CO‚ÇÇ ‚Üí glucosa) y respiraci√≥n celular (oxidaci√≥n ‚Üí ATP)</li>
                                </ul>
                            </div>
                            
                            <div class="bg-green-50 p-4 rounded-lg border-l-4 border-green-500">
                                <h4 class="font-bold text-green-800 mb-2 text-lg">2. Hidr√≥geno (H)</h4>
                                <ul class="list-disc list-inside ml-4 space-y-2">
                                    <li class="bg-white p-2 rounded">Componente del agua (H‚ÇÇO)</li>
                                    <li class="bg-white p-2 rounded">Puentes de hidr√≥geno ‚Üí estructura de prote√≠nas y ADN</li>
                                    <li class="bg-white p-2 rounded">Participa en fotos√≠ntesis y respiraci√≥n (transporte de electrones)</li>
                                </ul>
                            </div>
                            
                            <div class="bg-red-50 p-4 rounded-lg border-l-4 border-red-500">
                                <h4 class="font-bold text-red-800 mb-2 text-lg">3. Ox√≠geno (O)</h4>
                                <ul class="list-disc list-inside ml-4 space-y-2">
                                    <li class="bg-white p-2 rounded">Respiraci√≥n celular ‚Üí aceptor final de electrones</li>
                                    <li class="bg-white p-2 rounded">Componente del agua y biomol√©culas</li>
                                    <li class="bg-white p-2 rounded">Participa en oxidaci√≥n de glucosa ‚Üí ATP</li>
                                </ul>
                            </div>
                            
                            <div class="bg-purple-50 p-4 rounded-lg border-l-4 border-purple-500">
                                <h4 class="font-bold text-purple-800 mb-2 text-lg">4. Nitr√≥geno (N)</h4>
                                <ul class="list-disc list-inside ml-4 space-y-2">
                                    <li class="bg-white p-2 rounded">Amino√°cidos ‚Üí prote√≠nas</li>
                                    <li class="bg-white p-2 rounded">Nucle√≥tidos ‚Üí ADN, ARN</li>
                                    <li class="bg-white p-2 rounded">Participa en s√≠ntesis de clorofila (plantas)</li>
                                    <li class="bg-white p-2 rounded">Ciclo del nitr√≥geno ‚Üí fijaci√≥n biol√≥gica por bacterias</li>
                                </ul>
                            </div>
                            
                            <div class="bg-indigo-50 p-4 rounded-lg border-l-4 border-indigo-500">
                                <h4 class="font-bold text-indigo-800 mb-2 text-lg">5. F√≥sforo (P) ‚Äì secundario seg√∫n San Marcos</h4>
                                <ul class="list-disc list-inside ml-4 space-y-2">
                                    <li class="bg-white p-2 rounded">ATP, ADP ‚Üí energ√≠a celular</li>
                                    <li class="bg-white p-2 rounded">Fosfol√≠pidos ‚Üí membrana celular</li>
                                    <li class="bg-white p-2 rounded">√Åcidos nucleicos ‚Üí estructura gen√©tica</li>
                                    <li class="bg-white p-2 rounded">Fotos√≠ntesis ‚Üí ATP y NADPH como energ√≠a qu√≠mica</li>
                                </ul>
                            </div>
                            
                            <div class="bg-yellow-50 p-4 rounded-lg border-l-4 border-yellow-500">
                                <h4 class="font-bold text-yellow-800 mb-2 text-lg">6. Azufre (S) ‚Äì secundario</h4>
                                <ul class="list-disc list-inside ml-4 space-y-2">
                                    <li class="bg-white p-2 rounded">Amino√°cidos: ciste√≠na y metionina ‚Üí puentes disulfuro</li>
                                    <li class="bg-white p-2 rounded">Cofactores enzim√°ticos</li>
                                    <li class="bg-white p-2 rounded">S√≠ntesis de prote√≠nas y vitaminas (biotina, tiamina)</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                `
            },
            {
                title: "P√°gina 3 - Funciones y Aplicaciones II",
                content: `
                    <div class="bg-white p-6 rounded-lg shadow-sm">
                        <div class="space-y-4">
                            <div class="bg-blue-50 p-4 rounded-lg border-l-4 border-blue-500">
                                <h4 class="font-bold text-blue-800 mb-2 text-lg">7. Sodio (Na)</h4>
                                <ul class="list-disc list-inside ml-4 space-y-2">
                                    <li class="bg-white p-2 rounded">Equilibrio osm√≥tico y l√≠quido extracelular</li>
                                    <li class="bg-white p-2 rounded">Impulso nervioso ‚Üí bomba Na‚Å∫/K‚Å∫</li>
                                    <li class="bg-white p-2 rounded">Transporte activo y difusi√≥n</li>
                                </ul>
                            </div>
                            
                            <div class="bg-green-50 p-4 rounded-lg border-l-4 border-green-500">
                                <h4 class="font-bold text-green-800 mb-2 text-lg">8. Potasio (K)</h4>
                                <ul class="list-disc list-inside ml-4 space-y-2">
                                    <li class="bg-white p-2 rounded">Equilibrio osm√≥tico intracelular</li>
                                    <li class="bg-white p-2 rounded">Contracci√≥n muscular</li>
                                    <li class="bg-white p-2 rounded">S√≠ntesis proteica</li>
                                    <li class="bg-white p-2 rounded">Participa en bomba Na‚Å∫/K‚Å∫ ‚Üí mantenimiento potencial de membrana</li>
                                </ul>
                            </div>
                            
                            <div class="bg-red-50 p-4 rounded-lg border-l-4 border-red-500">
                                <h4 class="font-bold text-red-800 mb-2 text-lg">9. Calcio (Ca)</h4>
                                <ul class="list-disc list-inside ml-4 space-y-2">
                                    <li class="bg-white p-2 rounded">Contracci√≥n muscular</li>
                                    <li class="bg-white p-2 rounded">Coagulaci√≥n sangu√≠nea</li>
                                    <li class="bg-white p-2 rounded">Se√±alizaci√≥n celular (segundo mensajero)</li>
                                    <li class="bg-white p-2 rounded">Componentes de huesos y paredes celulares vegetales</li>
                                </ul>
                            </div>
                            
                            <div class="bg-purple-50 p-4 rounded-lg border-l-4 border-purple-500">
                                <h4 class="font-bold text-purple-800 mb-2 text-lg">10. Magnesio (Mg)</h4>
                                <ul class="list-disc list-inside ml-4 space-y-2">
                                    <li class="bg-white p-2 rounded">Cofactor enzim√°tico</li>
                                    <li class="bg-white p-2 rounded">Clorofila ‚Üí fotos√≠ntesis</li>
                                    <li class="bg-white p-2 rounded">Estabiliza ribosomas</li>
                                    <li class="bg-white p-2 rounded">ATP-metabolismo</li>
                                </ul>
                            </div>
                            
                            <div class="bg-indigo-50 p-4 rounded-lg border-l-4 border-indigo-500">
                                <h4 class="font-bold text-indigo-800 mb-2 text-lg">11. Cloro (Cl)</h4>
                                <ul class="list-disc list-inside ml-4 space-y-2">
                                    <li class="bg-white p-2 rounded">Balance h√≠drico</li>
                                    <li class="bg-white p-2 rounded">Secreci√≥n g√°strica (HCl)</li>
                                    <li class="bg-white p-2 rounded">Osmosis y excitabilidad nerviosa</li>
                                </ul>
                            </div>
                            
                            <div class="bg-yellow-50 p-4 rounded-lg border-l-4 border-yellow-500">
                                <h4 class="font-bold text-yellow-800 mb-2 text-lg">12. Hierro (Fe)</h4>
                                <ul class="list-disc list-inside ml-4 space-y-2">
                                    <li class="bg-white p-2 rounded">Transporte de ox√≠geno ‚Üí hemoglobina y mioglobina</li>
                                    <li class="bg-white p-2 rounded">Citocromos ‚Üí respiraci√≥n celular</li>
                                    <li class="bg-white p-2 rounded">Carencias ‚Üí anemia ferrop√©nica</li>
                                    <li class="bg-white p-2 rounded">Exceso ‚Üí hemocromatosis</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                `
            },
            {
                title: "P√°gina 4 - Oligoelementos y Funciones Celulares",
                content: `
                    <div class="bg-white p-6 rounded-lg shadow-sm">
                        <div class="space-y-4">
                            <div class="bg-blue-50 p-4 rounded-lg border-l-4 border-blue-500">
                                <h4 class="font-bold text-blue-800 mb-2 text-lg">13. Cobre (Cu)</h4>
                                <ul class="list-disc list-inside ml-4 space-y-2">
                                    <li class="bg-white p-2 rounded">Cofactor enzim√°tico ‚Üí citocromo C oxidasa</li>
                                    <li class="bg-white p-2 rounded">S√≠ntesis de hemoglobina</li>
                                    <li class="bg-white p-2 rounded">Antioxidante (super√≥xido dismutasa)</li>
                                </ul>
                            </div>
                            
                            <div class="bg-green-50 p-4 rounded-lg border-l-4 border-green-500">
                                <h4 class="font-bold text-green-800 mb-2 text-lg">14. Zinc (Zn)</h4>
                                <ul class="list-disc list-inside ml-4 space-y-2">
                                    <li class="bg-white p-2 rounded">Cofactor enzim√°tico ‚Üí ADN polimerasa</li>
                                    <li class="bg-white p-2 rounded">S√≠ntesis de prote√≠nas y divisi√≥n celular</li>
                                    <li class="bg-white p-2 rounded">Cicatrizaci√≥n y funci√≥n inmune</li>
                                </ul>
                            </div>
                            
                            <div class="bg-red-50 p-4 rounded-lg border-l-4 border-red-500">
                                <h4 class="font-bold text-red-800 mb-2 text-lg">15. Yodo (I)</h4>
                                <ul class="list-disc list-inside ml-4 space-y-2">
                                    <li class="bg-white p-2 rounded">Hormonas tiroideas ‚Üí T3 y T4</li>
                                    <li class="bg-white p-2 rounded">Crecimiento y metabolismo</li>
                                    <li class="bg-white p-2 rounded">Deficiencia ‚Üí bocio, cretinismo</li>
                                </ul>
                            </div>
                            
                            <div class="bg-purple-50 p-4 rounded-lg border-l-4 border-purple-500">
                                <h4 class="font-bold text-purple-800 mb-2 text-lg">16. Selenio (Se)</h4>
                                <ul class="list-disc list-inside ml-4 space-y-2">
                                    <li class="bg-white p-2 rounded">Glutati√≥n peroxidasa ‚Üí defensa antioxidante</li>
                                    <li class="bg-white p-2 rounded">Regulaci√≥n tiroidea</li>
                                </ul>
                            </div>
                            
                            <div class="bg-indigo-50 p-4 rounded-lg border-l-4 border-indigo-500">
                                <h4 class="font-bold text-indigo-800 mb-2 text-lg">17. Manganeso (Mn)</h4>
                                <ul class="list-disc list-inside ml-4 space-y-2">
                                    <li class="bg-white p-2 rounded">Cofactor enzim√°tico ‚Üí fotos√≠ntesis, s√≠ntesis de amino√°cidos</li>
                                    <li class="bg-white p-2 rounded">Metabolismo de carbohidratos y l√≠pidos</li>
                                </ul>
                            </div>

                            <div class="bg-yellow-50 p-4 rounded-lg border-l-4 border-yellow-500 mt-6">
                                <h4 class="font-bold text-yellow-800 mb-3 text-lg">Funciones celulares y fisiol√≥gicas espec√≠ficas</h4>
                                <ul class="list-disc list-inside ml-4 space-y-2">
                                    <li class="bg-white p-2 rounded"><span class="font-bold">Fotos√≠ntesis:</span> C, H, O, Mg, Fe, Mn</li>
                                    <li class="bg-white p-2 rounded"><span class="font-bold">Respiraci√≥n celular:</span> C, H, O, N, Fe, Cu</li>
                                    <li class="bg-white p-2 rounded"><span class="font-bold">Bomba Na‚Å∫/K‚Å∫:</span> Na, K, Mg, ATP</li>
                                    <li class="bg-white p-2 rounded"><span class="font-bold">Osmosis y equilibrio h√≠drico:</span> Na, K, Cl</li>
                                    <li class="bg-white p-2 rounded"><span class="font-bold">Divisi√≥n celular y reproducci√≥n:</span> Zn, P, Mg</li>
                                    <li class="bg-white p-2 rounded"><span class="font-bold">Coagulaci√≥n y contracci√≥n:</span> Ca, K, Mg</li>
                                    <li class="bg-white p-2 rounded"><span class="font-bold">S√≠ntesis de prote√≠nas:</span> N, S, Zn, Mg</li>
                                    <li class="bg-white p-2 rounded"><span class="font-bold">Se√±alizaci√≥n celular:</span> Ca, Mg, K</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                `
            },
            {
                title: "P√°gina 5 - Carencias, Excesos y Biomol√©culas",
                content: `
                    <div class="bg-white p-6 rounded-lg shadow-sm">
                        <h3 class="text-xl font-bold text-green-700 mb-4 border-b-2 border-green-200 pb-2">V. Carencias y excesos (Animales y Plantas)</h3>
                        
                        <div class="overflow-x-auto mb-6">
                            <table class="bioelemento-table">
                                <thead>
                                    <tr>
                                        <th>Elemento</th>
                                        <th>Carencia</th>
                                        <th>Efecto</th>
                                        <th>Exceso</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="font-semibold">Fe</td>
                                        <td>Anemia</td>
                                        <td>Fatiga, palidez</td>
                                        <td>Hemocromatosis</td>
                                    </tr>
                                    <tr>
                                        <td class="font-semibold">Zn</td>
                                        <td>Retraso de crecimiento</td>
                                        <td>Ca√≠da cabello, mal cicatrizaci√≥n</td>
                                        <td>Toxicidad ‚Üí v√≥mitos</td>
                                    </tr>
                                    <tr>
                                        <td class="font-semibold">Cu</td>
                                        <td>Anemia, defectos √≥seos</td>
                                        <td>Fragilidad capilar</td>
                                        <td>Toxicidad hep√°tica</td>
                                    </tr>
                                    <tr>
                                        <td class="font-semibold">I</td>
                                        <td>Bocio, cretinismo</td>
                                        <td>Hipotiroidismo</td>
                                        <td>Hipertiroidismo</td>
                                    </tr>
                                    <tr>
                                        <td class="font-semibold">Mg</td>
                                        <td>Calambres, arritmias</td>
                                        <td>Debilidad</td>
                                        <td>Diarrea</td>
                                    </tr>
                                    <tr>
                                        <td class="font-semibold">Ca</td>
                                        <td>Osteoporosis, hipocalcemia</td>
                                        <td>Tetania</td>
                                        <td>Hipercalcemia</td>
                                    </tr>
                                    <tr>
                                        <td class="font-semibold">P</td>
                                        <td>Debilidad √≥sea, falta de ATP</td>
                                        <td>Fatiga</td>
                                        <td>Toxicidad renal</td>
                                    </tr>
                                    <tr>
                                        <td class="font-semibold">K</td>
                                        <td>Hipokalemia</td>
                                        <td>Arritmias</td>
                                        <td>Hiperkalemia</td>
                                    </tr>
                                    <tr>
                                        <td class="font-semibold">Na</td>
                                        <td>Hiponatremia</td>
                                        <td>Confusi√≥n, calambres</td>
                                        <td>Hipernatremia</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="mb-6">
                            <h4 class="font-bold text-blue-800 mb-3">En plantas:</h4>
                            <ul class="list-disc list-inside space-y-2 ml-4">
                                <li class="bg-gray-50 p-2 rounded"><span class="font-bold">N</span> ‚Üí clorosis, crecimiento d√©bil</li>
                                <li class="bg-gray-50 p-2 rounded"><span class="font-bold">P</span> ‚Üí retraso en floraci√≥n y fructificaci√≥n</li>
                                <li class="bg-gray-50 p-2 rounded"><span class="font-bold">K</span> ‚Üí bordes amarillos, hojas marchitas</li>
                                <li class="bg-gray-50 p-2 rounded"><span class="font-bold">Mg</span> ‚Üí clorosis interveinal</li>
                                <li class="bg-gray-50 p-2 rounded"><span class="font-bold">Fe</span> ‚Üí clorosis j√≥venes hojas</li>
                            </ul>
                        </div>

                        <h3 class="text-xl font-bold text-green-700 mb-4 border-b-2 border-green-200 pb-2">VI. Bioelementos en biomol√©culas</h3>
                        
                        <div class="overflow-x-auto">
                            <table class="bioelemento-table">
                                <thead>
                                    <tr>
                                        <th>Biomol√©cula</th>
                                        <th>Elementos clave</th>
                                        <th>Funci√≥n</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="font-semibold">Carbohidratos</td>
                                        <td>C, H, O</td>
                                        <td>Energ√≠a r√°pida, estructura</td>
                                    </tr>
                                    <tr>
                                        <td class="font-semibold">L√≠pidos</td>
                                        <td>C, H, O, P</td>
                                        <td>Energ√≠a almacenada, membranas</td>
                                    </tr>
                                    <tr>
                                        <td class="font-semibold">Prote√≠nas</td>
                                        <td>C, H, O, N, S</td>
                                        <td>Enzimas, estructura, transporte</td>
                                    </tr>
                                    <tr>
                                        <td class="font-semibold">√Åcidos nucleicos</td>
                                        <td>C, H, O, N, P</td>
                                        <td>Almacenamiento de informaci√≥n gen√©tica</td>
                                    </tr>
                                    <tr>
                                        <td class="font-semibold">Vitaminas</td>
                                        <td>C, H, O, S, P</td>
                                        <td>Cofactores, antioxidantes</td>
                                    </tr>
                                    <tr>
                                        <td class="font-semibold">Pigmentos</td>
                                        <td>Mg, Fe</td>
                                        <td>Clorofila, hemoglobina</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                `
            }
        ];

        // --- FUNCI√ìN handleAnswer ---
        function handleAnswer(qIndex, altIndex) {
            if (questions[qIndex].userAnswer !== null) {
                return;
            }

            questions[qIndex].userAnswer = altIndex;
            const isCorrect = questions[qIndex].alternatives[altIndex].isCorrect;

            if (isCorrect) {
                playCorrectSound();
            } else {
                vibrateIncorrect();
            }

            const questionContainer = document.getElementById(`${APP_ID}-q-${qIndex}`);
            if (questionContainer) {
                questionContainer.outerHTML = renderQuestion(questions[qIndex], qIndex);
            }
            
            // ‚úÖ NUEVO: Chequear milestone cada 10 preguntas
            checkMilestone(qIndex);
            
            const answered = getAnsweredCount();
            if (answered === TOTAL_QUESTIONS) {
                setTimeout(() => {
                    alert("¬°Has completado todas las preguntas! Presiona el bot√≥n 'üìä' para ver tus resultados.");
                }, 500);
            }
        }

        // --- [TODAS LAS DEM√ÅS FUNCIONES PERMANECEN IGUALES] ---
        function getAnsweredCount() {
            return questions.filter(q => q.userAnswer !== null).length;
        }

        function renderStartPage() {
            const container = document.getElementById('app-container');
            container.innerHTML = `
                <div class="card text-center max-w-lg mx-auto p-8">
                    <img src="https://placehold.co/100x100/1D4ED8/FFFFFF?text=SomosUni" alt="Logo SomosUni" class="mx-auto h-24 w-24 rounded-full shadow-lg mb-4">
                    
                    <h1 class="text-4xl font-extrabold text-blue-800 mb-6">${TEST_NAME}</h1>
                    
                    <div class="mb-8">
                        <input type="text" id="${APP_ID}-name" value="${participantName}" placeholder="Ingresa tu nombre" 
                               class="w-full p-4 text-lg border-2 border-gray-300 rounded-xl focus:ring-blue-500 focus:border-blue-500 transition duration-150 text-center font-medium">
                        <p id="${APP_ID}-name-error" class="text-base text-red-600 mt-3 hidden">Por favor, ingresa tu nombre completo para iniciar.</p>
                    </div>

                    <button onclick="initQuiz()" id="${APP_ID}-start-btn"
                            class="w-full bg-blue-600 text-white font-bold py-4 text-lg rounded-xl hover:bg-blue-700 transition duration-200 shadow-md transform hover:scale-[1.01]">
                        INICIAR CUESTIONARIO Y VER PREGUNTAS
                    </button>
                    
                    <button onclick="showPDFReview()"
                            class="mt-5 w-full bg-yellow-400 text-gray-800 font-medium py-4 text-lg rounded-xl hover:bg-yellow-500 transition duration-200 shadow-md">
                        üìö REPASO COMPLETO (PDF) antes de Empezar
                    </button>

                    <div class="mt-12 pt-6 border-t-2 border-gray-300 text-center bg-blue-50 rounded-xl p-5">
                        <p class="text-lg font-semibold text-gray-700">
                            Desarrollado por: 
                            <span class="font-bold text-blue-800 text-xl">Percy Romeo Gonzales Tarazona</span>
                        </p>
                        <p class="text-base font-medium text-gray-600 mt-2">
                            Ingeniero y Matem√°tico
                        </p>
                    </div>
                </div>
            `;
        }

        function initQuiz() {
            const nameInput = document.getElementById(`${APP_ID}-name`);
            const errorElement = document.getElementById(`${APP_ID}-name-error`);
            participantName = nameInput.value.trim();

            if (participantName.length < 3) {
                errorElement.classList.remove('hidden');
                nameInput.focus();
                return;
            }

            errorElement.classList.add('hidden');
            questions = generateQuestions();
            currentPage = 'quiz';
            renderQuizPage();
        }

        function renderQuizPage() {
            const container = document.getElementById('app-container');
            const questionsHtml = questions.map((q, i) => renderQuestion(q, i)).join('');
            
            container.innerHTML = `
                <div id="quiz-header-fixed">
                    <h1 class="text-4xl font-extrabold text-blue-800 text-center">${TEST_NAME}</h1>
                    <p class="text-center text-gray-600 mt-2">Estudiante: ${participantName}</p>
                </div>

                <div class="quiz-content pb-20">${questionsHtml}</div>
                
                <button id="floating-stats-button" onclick="toggleModal(true)"
                        class="bg-indigo-600 text-white text-3xl font-bold rounded-full shadow-xl flex items-center justify-center border-4 border-white hover:bg-indigo-700">
                    üìä
                </button>
            `;
            
            isModalOpen = false;
            isPDFModalOpen = false;
            isMilestoneModalOpen = false;
            renderModal();
        }

        function renderQuestion(question, qIndex) {
            const questionId = `${APP_ID}-q-${qIndex}`;
            const isAnswered = question.userAnswer !== null;

            let globalEmoji = '';
            if (isAnswered) {
                globalEmoji = question.alternatives[question.userAnswer].isCorrect 
                              ? `<span class="ml-2 text-2xl" aria-label="Correcto">üòÑ</span>`
                              : `<span class="ml-2 text-2xl" aria-label="Incorrecto">üòû</span>`;
            }

            return `
                <div id="${questionId}" class="question-card">
                    <div class="bg-blue-50 p-4 rounded-xl mb-4 border-l-4 border-blue-400">
                        <p class="text-lg font-bold text-gray-800 whitespace-pre-line">
                            P${qIndex + 1}: ${question.questionText}
                            ${globalEmoji}
                        </p>
                    </div>

                    <div class="space-y-2">
                        ${question.alternatives.map((alt, index) => {
                            const isCorrect = alt.isCorrect;
                            const isUserChoice = question.userAnswer === index;
                            let classes = 'alternative-label';
                            let emoji = '';

                            if (isAnswered) {
                                classes += ' disabled';
                                if (isUserChoice) {
                                    classes += isCorrect ? ' correct' : ' incorrect';
                                    emoji = isCorrect ? 'üòÑ' : 'üòû';
                                } else if (isCorrect && question.explanationVisible) {
                                    classes += ' correct';
                                    emoji = '‚úÖ';
                                }
                            }

                            return `
                                <label class="${classes}" data-q-index="${qIndex}" data-alt-index="${index}">
                                    <input type="radio" name="${APP_ID}-alt-q-${qIndex}" value="${index}" 
                                           ${isUserChoice ? 'checked' : ''}
                                           ${isAnswered ? 'disabled' : ''}
                                           onclick="handleAnswer(${qIndex}, ${index})">
                                    <span class="mr-3 font-medium text-blue-800">${String.fromCharCode(65 + index)}.</span>
                                    <span class="flex-1 text-gray-700">${alt.text}</span>
                                    <span class="text-2xl ml-2">${emoji}</span>
                                </label>
                            `;
                        }).join('')}
                    </div>
                    
                    <div id="${questionId}-feedback-area" class="mt-4">
                        ${isAnswered ? renderAnswerFeedback(question, qIndex) : ''}
                    </div>
                </div>
            `;
        }

        function renderAnswerFeedback(question, qIndex) {
            const questionId = `${APP_ID}-q-${qIndex}`;
            const feedbackArea = document.getElementById(`${questionId}-feedback-area`);
            
            if (!question.explanationVisible) {
                const html = `
                    <button onclick="showAnswerExplanation(${qIndex})"
                            class="mt-2 text-sm bg-yellow-400 text-gray-800 font-bold py-2 px-4 rounded-lg hover:bg-yellow-500 transition duration-200 shadow-sm">
                        VER RESPUESTA Y EXPLICACI√ìN
                    </button>
                `;
                if (feedbackArea) { feedbackArea.innerHTML = html; }
                return html;
            }
            
            const correctAnswer = question.alternatives.find(a => a.isCorrect);
            const correctIndex = question.alternatives.findIndex(a => a.isCorrect);
            
            const html = `
                <div class="bg-indigo-100 p-4 rounded-xl shadow-inner border-l-4 border-indigo-500 mt-2">
                    <p class="font-bold text-indigo-700 mb-2">Explicaci√≥n de la Respuesta:</p>
                    <p class="text-sm text-indigo-800">${question.explanation}</p>
                    <p class="mt-3 text-base font-semibold text-indigo-900">
                        Correcta: ${String.fromCharCode(65 + correctIndex)} - ${correctAnswer.text}
                    </p>
                </div>
            `;
            if (feedbackArea) { feedbackArea.innerHTML = html; }
            return html;
        }

        function showAnswerExplanation(qIndex) {
            questions[qIndex].explanationVisible = true;
            const questionContainer = document.getElementById(`${APP_ID}-q-${qIndex}`);
            if (questionContainer) {
                questionContainer.outerHTML = renderQuestion(questions[qIndex], qIndex);
            }
        }

        function toggleModal(open) {
            if (typeof open === 'boolean') {
                isModalOpen = open;
            } else {
                isModalOpen = !isModalOpen;
            }
            renderModal();
        }

        function renderModal() {
            const modalRoot = document.getElementById('modal-root');
            
            if (!isModalOpen) {
                if (!isPDFModalOpen && !isMilestoneModalOpen) {
                    modalRoot.innerHTML = '';
                }
                return;
            }

            if (isPDFModalOpen || isMilestoneModalOpen) {
                togglePDFReview(false);
                closeMilestone();
            }

            const answeredCount = getAnsweredCount();
            
            modalRoot.innerHTML = `
                <div class="modal-overlay" onclick="toggleModal(false)">
                    <div class="modal-content" onclick="event.stopPropagation()">
                        <div class="flex justify-between items-start border-b pb-2 mb-4">
                            <h3 class="text-xl font-bold text-gray-800 truncate">
                                Estad√≠sticas de ${participantName}
                            </h3>
                            <button onclick="toggleModal(false)" class="text-gray-500 hover:text-gray-800 text-2xl font-bold leading-none">
                                &times;
                            </button>
                        </div>

                        <div class="mb-6 p-4 bg-yellow-50 rounded-lg border-2 border-yellow-300 text-center">
                            <p class="text-lg font-mono text-gray-800">
                                Respuestas Contestadas
                            </p>
                            <p class="text-4xl font-extrabold text-yellow-600">
                                ${answeredCount} / ${TOTAL_QUESTIONS}
                            </p>
                        </div>
                        
                        <button onclick="showResults()"
                                class="w-full bg-green-500 text-white font-bold py-3 rounded-xl hover:bg-green-600 transition duration-200 shadow-md transform hover:scale-[1.01]">
                            FINALIZAR CUESTIONARIO Y VER ESTAD√çSTICAS
                        </button>
                    </div>
                </div>
            `;
        }

        function showResults() {
            currentPage = 'results';
            renderResultsPage();
            toggleModal(false);
        }

        function calculateScore() {
            let correct = 0;
            let incorrect = 0;
            
            questions.forEach(q => {
                if (q.userAnswer !== null) {
                    if (q.alternatives[q.userAnswer].isCorrect) {
                        correct++;
                    } else {
                        incorrect++;
                    }
                }
            });
            
            return { correct, incorrect, skipped: TOTAL_QUESTIONS - (correct + incorrect) };
        }

        function renderResultsPage() {
            const container = document.getElementById('app-container');
            const finalScore = calculateScore();
            const total = TOTAL_QUESTIONS;
            const percentage = total > 0 ? ((finalScore.correct / total) * 100).toFixed(1) : 0;
            const performanceMessage = getPerformanceMessage(percentage);

            container.innerHTML = `
                <div class="card text-center max-w-lg mx-auto p-8">
                    <img src="https://placehold.co/100x100/1D4ED8/FFFFFF?text=SomosUni" alt="Logo SomosUni" class="mx-auto h-24 w-24 rounded-full shadow-lg mb-4">
                    <h1 class="text-3xl font-extrabold text-blue-700 mb-4">¬°Estad√≠sticas del Cuestionario, ${participantName}!</h1>
                    <p class="text-xl text-gray-700">${performanceMessage}</p>
                </div>
                
                <div class="card max-w-lg mx-auto p-6">
                    <h2 class="text-2xl font-bold text-gray-800 border-b pb-2 mb-4">Detalles del Desempe√±o</h2>
                    
                    <div class="space-y-3">
                        <div class="flex justify-between items-center p-3 bg-green-50 rounded-lg shadow-sm">
                            <span class="text-lg font-semibold text-green-700">Respuestas Correctas:</span>
                            <span class="text-2xl font-extrabold text-green-600">${finalScore.correct}</span>
                        </div>
                        
                        <div class="flex justify-between items-center p-3 bg-red-50 rounded-lg shadow-sm">
                            <span class="text-lg font-semibold text-red-700">Respuestas Incorrectas:</span>
                            <span class="text-2xl font-extrabold text-red-600">${finalScore.incorrect}</span>
                        </div>
                        
                        <div class="flex justify-between items-center p-3 bg-yellow-50 rounded-lg shadow-sm">
                            <span class="text-lg font-semibold text-yellow-700">Preguntas No Contestadas:</span>
                            <span class="text-2xl font-extrabold text-yellow-600">${finalScore.skipped}</span>
                        </div>

                        <div class="flex justify-between items-center p-4 bg-blue-100 rounded-lg shadow-lg mt-6 border-2 border-blue-300">
                            <span class="text-xl font-bold text-blue-800">Puntuaci√≥n Total:</span>
                            <span class="text-3xl font-extrabold text-blue-700">${percentage}%</span>
                        </div>
                    </div>

                    <button onclick="restartTest()"
                            class="mt-8 w-full bg-indigo-600 text-white font-bold py-3 rounded-xl hover:bg-indigo-700 transition duration-200 shadow-lg transform hover:scale-[1.01]">
                        Volver a la P√°gina de Inicio
                    </button>
                </div>
                
                <div class="text-center mt-6">
                    <p class="text-base font-semibold text-gray-600">
                        Desarrollado por: 
                        <span class="font-bold text-blue-800 text-lg">Percy Romeo Gonzales Tarazona</span>
                    </p>
                    <p class="text-sm font-medium text-gray-500">Ingeniero y Matem√°tico</p>
                </div>
            `;
        }

        function getPerformanceMessage(percentage) {
            if (percentage >= 90) return "¬°Felicidades! Tienes un dominio superior de los Bioelementos.";
            if (percentage >= 70) return "¬°Muy bien! Un s√≥lido entendimiento de la materia.";
            if (percentage >= 50) return "Nivel aceptable. Es momento de enfocarse en las √°reas d√©biles.";
            return "Requiere un repaso intensivo. ¬°√Ånimo y a estudiar!";
        }

        function restartTest() {
            participantName = "";
            questions = [];
            currentPage = 'start';
            initApp();
        }

        // --- Funciones del PDF CORREGIDAS ---
        function showPDFReview() {
            const modalRoot = document.getElementById('modal-root');
            currentPDFPage = 1;
            
            modalRoot.innerHTML = `
                <div class="modal-overlay" onclick="togglePDFReview(false)">
                    <div class="modal-content-large" onclick="event.stopPropagation()">
                        <div class="flex justify-between items-center border-b pb-3 mb-4">
                            <h3 class="text-2xl font-bold text-blue-800">üìö Repaso Completo: Bioelementos</h3>
                            <button onclick="togglePDFReview(false)" class="text-gray-500 hover:text-gray-800 text-2xl font-bold leading-none">
                                &times;
                            </button>
                        </div>
                        
                        <div class="pdf-content-area mb-4" id="pdf-content-display">
                            ${pdfContent[0].content}
                        </div>
                        
                        <div class="page-navigation">
                            <button onclick="changePDFPage(${currentPDFPage - 1})" 
                                    class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed"
                                    ${currentPDFPage === 1 ? 'disabled' : ''}>
                                ‚Üê Anterior
                            </button>
                            
                            <span class="text-lg font-semibold" id="pdf-page-indicator">
                                P√°gina ${currentPDFPage} de ${totalPDFPages}
                            </span>
                            
                            <button onclick="changePDFPage(${currentPDFPage + 1})" 
                                    class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed"
                                    ${currentPDFPage === totalPDFPages ? 'disabled' : ''}>
                                Siguiente ‚Üí
                            </button>
                        </div>
                        
                        <div class="text-center mt-4">
                            <button onclick="togglePDFReview(false)"
                                    class="bg-blue-600 text-white font-bold py-3 px-6 rounded-xl hover:bg-blue-700 transition duration-200">
                                Cerrar Repaso y Comenzar Test
                            </button>
                        </div>
                    </div>
                </div>
            `;
            isPDFModalOpen = true;
        }

        function changePDFPage(pageNumber) {
            if (pageNumber < 1 || pageNumber > totalPDFPages) return;
            
            currentPDFPage = pageNumber;
            const contentArea = document.getElementById('pdf-content-display');
            const pageIndicator = document.getElementById('pdf-page-indicator');
            
            if (contentArea) {
                contentArea.innerHTML = pdfContent[pageNumber - 1].content;
            }
            
            if (pageIndicator) {
                pageIndicator.textContent = `P√°gina ${pageNumber} de ${totalPDFPages}`;
            }
            
            // Actualizar botones
            const prevBtn = document.querySelector('.page-navigation button:first-child');
            const nextBtn = document.querySelector('.page-navigation button:last-child');
            
            if (prevBtn) {
                prevBtn.disabled = pageNumber === 1;
                prevBtn.onclick = () => changePDFPage(pageNumber - 1);
            }
            if (nextBtn) {
                nextBtn.disabled = pageNumber === totalPDFPages;
                nextBtn.onclick = () => changePDFPage(pageNumber + 1);
            }
        }

        function togglePDFReview(open) {
            if (open === false) {
                document.getElementById('modal-root').innerHTML = '';
                isPDFModalOpen = false;
            }
        }

        // --- Inicializaci√≥n de la App ---
        function initApp() {
            currentPage = 'start';
            renderStartPage();
            
            document.addEventListener('click', (e) => {
                if (isPDFModalOpen && e.target.classList.contains('modal-overlay')) {
                    togglePDFReview(false);
                }
                if (isModalOpen && e.target.classList.contains('modal-overlay')) {
                    toggleModal(false);
                }
                if (isMilestoneModalOpen && e.target.classList.contains('modal-overlay')) {
                    closeMilestone();
                }
            });
        }

        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>